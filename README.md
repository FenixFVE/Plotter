# Plotter - Комплексная система построения графиков

### Интерактивное управление точками
- **Перетаскивание мышью** - кликните и перетащите любую точку
- **Групповое перетаскивание** - выберите несколько точек и перетащите любую из них
- **Информация о курсоре** - отображение координат мыши в реальном времени
- **Настройка точности** - регулируемое количество знаков после запятой (0-10)

### Множественный выбор
- **Ctrl + клик на холсте** - добавить/убрать точку из выбора
- **Ctrl + клик в списке** - стандартный множественный выбор
- **Shift + клик в списке** - выбор диапазона
- **Автоматическая синхронизация** между холстом и списком

### Визуальные эффекты
- **Мигание выбранных элементов** - точки и функции мигают при выборе
- **Индикатор группового редактирования** - показывается при выборе нескольких элементов
- **Счетчик выбранных элементов** - отображение количества выбранных точек/функций

## Управление точками

### Настройка свойств точек
Каждая точка имеет следующие настраиваемые свойства:
- **Название** - текстовое описание точки
- **Координаты X, Y** - позиция на графике с настраиваемой точностью
- **Математические выражения** - координаты могут быть заданы формулами
- **Размер маркера** - размер точки (в пикселях)
- **Форма маркера** - круг, квадрат, ромб, треугольник, крест, звезда и их пустые варианты
- **Цвет с прозрачностью** - полная поддержка альфа-канала
- **Блокировки полей** - защита от случайного изменения любого свойства

### Операции с точками
- **Добавить точку** - создание новой точки в центре видимой области
- **Удалить выбранные** - удаление всех выбранных точек
- **Перемещение в списке** - изменение порядка точек кнопками ↑↓
- **Групповое редактирование** - одновременное изменение свойств нескольких точек

## Система управления функциями

### Математические выражения
- **Поддержка сложных формул** - тригонометрические, логарифмические, степенные функции
- **Вложенные функции** - функции могут использовать другие функции (например: `f2(x) = f1(x) + x^2`)
- **Зависимость от точек** - функции могут ссылаться на координаты точек (например: `A.X + x`)
- **Встроенные константы** - π (pi), e и другие математические константы
- **Пользовательские переменные** - поддержка именованных переменных и параметров

### Типы функций
- **Обычные функции** - стандартные функции одной переменной `f(x)`
- **Функции нескольких переменных** - `f(x,y)`, `f(x,y,z)` и т.д.
- **Неявные кривые** - решение уравнений вида `f(x,y) = 0` (например, окружности, эллипсы)
- **Параметрические кривые** - функции с настраиваемыми именами аргументов

### Настройки функций
Каждая функция имеет расширенные настройки:

**Основные параметры:**
- **Название** - имя функции для ссылок
- **Выражение** - математическая формула
- **Видимость** - чекбокс включения/отключения отображения
- **Диапазоны** - MinX/MaxX для области построения
- **Автомасштаб** - автоматическое использование масштаба экрана

**Визуальное оформление:**
- **Цвет линии** - выбор цвета с палитрой
- **Толщина линии** - от 1 до 10 пикселей
- **Количество точек** - плотность дискретизации (10-10000)

**Расширенные опции:**
- **Количество аргументов** - 1-5 переменных
- **Имена аргументов** - настройка названий переменных
- **Режим неявной кривой** - для решения уравнений f(x,y)=0
- **Режим производительности** - быстрое построение для сложных функций

**Система блокировок:**
- **Блокировка полей** - защита любого параметра от изменения
- **Групповые блокировки** - применение к нескольким функциям одновременно

### Интерактивность функций
- **Клик по графику функции** - автоматический выбор функции в списке
- **Мигание выбранных функций** - визуальная обратная связь
- **Групповой выбор** - работа с несколькими функциями одновременно
- **Перемещение в списке** - изменение порядка отображения

## Алгоритм неявных кривых

### Технология Isoline Plotting
- **Адаптивная триангуляция** - автоматическое разбиение области
- **Бинарный поиск нулей** - точное нахождение пересечений
- **Оптимизация производительности** - кэширование результатов вычислений
- **Настройки качества** - балансировка между скоростью и точностью

### Примеры неявных кривых
- **Окружности:** `x^2 + y^2 - 1 = 0`
- **Эллипсы:** `x^2/4 + y^2/9 - 1 = 0`
- **Гиперболы:** `x^2 - y^2 - 1 = 0`
- **Сложные кривые:** `sin(x) + cos(y) = 0`

## Управление проектами

### Файловые операции
- **Сохранить проект** - экспорт всех данных в JSON формат
- **Загрузить проект** - импорт ранее сохраненного проекта
- **Новый проект** - очистка всех данных с подтверждением
- **Полная сериализация** - сохранение всех настроек, точек, функций и UI состояний

### Формат данных
- **JSON структура** - человекочитаемый формат
- **Версионность** - поддержка совместимости версий
- **Настройки графика** - масштаб, точность, блокировки осей
- **Данные точек** - координаты, стили, выражения, блокировки
- **Данные функций** - формулы, параметры, визуальные настройки
- **Состояние интерфейса** - развернутые элементы, выбранные объекты

## Настройки отображения

### Точность и масштаб
- **Настройка точности** - количество знаков после запятой (0-10)
- **Применение ко всем полям** - координаты, границы осей, курсор
- **Границы осей** - MinX, MaxX, MinY, MaxY с настраиваемой точностью
- **Блокировка осей** - защита от перемещения и масштабирования по X/Y

### Интерфейс пользователя
- **Раскрывающиеся списки** - компактное отображение элементов
- **Групповые операции** - массовое изменение свойств
- **Визуальные индикаторы** - счетчики выбранных элементов
- **Контекстные подсказки** - ToolTip для всех элементов управления

## Управление

### Основные операции с точками
- **Добавить точку** - кнопка "Добавить точку"
- **Удалить выбранные** - удаление всех выбранных точек
- **Перемещение вверх/вниз** - изменение порядка в списке
- **Выбор точки** - клик по точке или в списке
- **Множественный выбор** - Ctrl + клик
- **Диапазон выбора** - Shift + клик в списке

### Основные операции с функциями
- **Добавить функцию** - создание новой математической функции
- **Удалить выбранные** - удаление всех выбранных функций
- **Перемещение в списке** - изменение порядка отображения
- **Групповое редактирование** - изменение стилей нескольких функций
- **Переключение видимости** - быстрое включение/отключение отображения

## Математический парсер

### Поддерживаемые функции
**Тригонометрические:**
- `sin(x)`, `cos(x)`, `tan(x)` - основные функции
- `asin(x)`, `acos(x)`, `atan(x)` - обратные функции
- `sinh(x)`, `cosh(x)`, `tanh(x)` - гиперболические функции

**Степенные и логарифмические:**
- `exp(x)` - экспонента
- `log(x)` - натуральный логарифм
- `log10(x)` - десятичный логарифм
- `sqrt(x)` - квадратный корень
- `pow(x,y)` - возведение в степень
- `x^y` - альтернативная запись степени

**Общие математические:**
- `abs(x)` - модуль числа
- `min(x,y)`, `max(x,y)` - минимум и максимум
- `round(x)`, `floor(x)`, `ceiling(x)` - округление

### Сложные выражения
- **Вложенные функции:** `f2(x) = sin(f1(x)) + cos(x)`
- **Ссылки на точки:** `f(x) = A.X * x + B.Y`
- **Композиции:** `f3(x) = f1(f2(x))`
- **Условные зависимости:** функции могут зависеть от других функций и точек

## Технические детали

### Использованные технологии
- **WPF** (.NET 8.0) - основной фреймворк интерфейса
- **ScottPlot 5** - профессиональная библиотека графиков
- **Extended WPF Toolkit** - расширенные элементы управления
- **MVVM паттерн** - чистая архитектура приложения
- **System.Text.Json** - сериализация проектов
- **Custom Math Parser** - собственный парсер математических выражений

### Структура проекта
```
├── Models/
│   ├── PlotPoint.cs - модель точки с уведомлениями
│   ├── PlotFunction.cs - модель функции со всеми параметрами
│   └── ProjectData.cs - модели для сериализации проектов
├── ViewModels/
│   └── MainViewModel.cs - основная логика MVVM
├── Converters/
│   └── ColorConverter.cs - конвертеры для привязки данных
├── Controls/ - пользовательские элементы управления
├── MathExpressionParser.cs - парсер математических выражений
├── Implicit.cs - алгоритм построения неявных кривых
├── MainWindow.xaml - интерфейс приложения
└── MainWindow.xaml.cs - логика взаимодействия
```

### Ключевые особенности реализации
- **Dictionary сопоставления** между моделями и визуальными элементами
- **Двусторонняя синхронизация** выбора между холстом и списками
- **Групповые операции** через единый интерфейс редактирования
- **Кэширование неявных кривых** для оптимизации производительности
- **Защита от циклических обновлений** при синхронизации данных
- **Адаптивная триангуляция** для точного построения сложных кривых

### Оптимизации производительности
- **Режим производительности** для сложных функций
- **Кэширование вычислений** неявных кривых
- **Адаптивные параметры** качества построения
- **Ленивые вычисления** при изменении параметров
- **Оптимизированная отрисовка** с использованием ScottPlot Signal

## Сборка и запуск

### Требования
- **.NET 8.0** или выше
- **Windows 10/11** (WPF требует Windows)
- **Visual Studio 2022** или **VS Code** с расширением C#

### Быстрый старт
```bash
# Клонировать репозиторий
git clone [url-репозитория]

# Перейти в папку проекта
cd wpf_plot

# Восстановить NuGet пакеты
dotnet restore

# Собрать проект
dotnet build

# Запустить приложение
dotnet run --project WpfPlotApp.csproj
```

### Зависимости
```xml
<PackageReference Include="ScottPlot.WPF" Version="5.*" />
<PackageReference Include="Extended.Wpf.Toolkit" Version="4.*" />
<PackageReference Include="System.Text.Json" Version="8.*" />
```

## Примеры использования

### Базовые функции
```
f1(x) = sin(x)
f2(x) = x^2 + 2*x + 1
f3(x) = exp(-x^2/2)
```

### Вложенные функции
```
f1(x) = sin(x)
f2(x) = f1(x) + cos(x)
f3(x) = f1(f2(x))
```

### Функции с точками
```
Точка A: (2, 3)
f1(x) = A.X * x + A.Y
f2(x) = sqrt((x - A.X)^2 + (0 - A.Y)^2)
```

### Неявные кривые
```
x^2 + y^2 - 4 = 0        (окружность)
x^2/9 + y^2/4 - 1 = 0    (эллипс)
x^2 - y^2 - 1 = 0        (гипербола)
sin(x) + cos(y) = 0      (сложная кривая)
```

---


**Лицензия:** MIT  
**Поддерживаемые платформы:** Windows 10/11

**Особенности:**
- Полная поддержка математических выражений
- Интерактивное управление точками и функциями
- Неявные кривые с адаптивными алгоритмами
- Сохранение и загрузка проектов
- Современный WPF интерфейс
- Групповые операции и блокировки
- Высокая производительность визуализации

Это профессиональный инструмент для визуализации математических функций, подходящий как для образовательных целей, так и для серьезных научных вычислений. 